<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="E:/bridge/acbl/ACBL-Details.sqlite" readonly="1" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="125"/><column_width id="3" width="24577"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,6:mainawards"/><default_encoding codec=""/><browse_table_settings/></tab_browse><tab_sql><sql name="Set WAL Mode">PRAGMA journal_mode=WAL;
</sql><sql name="cgByBoard">-- Takes 3 minutes to read 24GB file and write 1.7GB table.
DROP TABLE IF EXISTS cgByBoard;
CREATE TABLE cgByBoard AS SELECT board_results.id, board_id, section_id, name AS section_name, round_number, table_number, ns_pair, ew_pair, ns_score, ew_score, contract, declarer, ew_match_points, ns_match_points, opening_lead, result, tricks_taken FROM board_results INNER JOIN boards ON board_results.board_id=boards.id INNER JOIN sections ON boards.section_id=sections.id ORDER BY section_id, round_number, table_number;
SELECT * FROM cgByBoard;
</sql><sql name="cgByBoardsJoinPairs">DROP TABLE IF EXISTS cgBoardsJoinPairs;
CREATE TABLE cgBoardsJoinPairs AS SELECT cgByBoard.*, pair_number, direction, pair_summaries.id AS pair_summary_id FROM cgByBoard INNER JOIN pair_summaries ON cgByBoard.section_id=pair_summaries.section_id GROUP BY round_number, table_number, board_id, pair_summaries.id ORDER BY cgByBoard.id, round_number, table_number, board_id, pair_summaries.id;
SELECT * FROM cgBoardsJoinPairs;
</sql><sql name="SQL 4">SELECT DISTINCT cg.id, cg.section_id, cg.name, board_id, round_number, table_number, ns_pair, ew_pair, pair_summaries.id, pair_number, direction, players.id, group_concat(players.id_number,','), group_concat(players.name,',') FROM cg INNER JOIN pair_summaries ON cg.section_id=pair_summaries.section_id INNER JOIN players ON players.pair_summary_id=pair_summaries.id GROUP BY pair_summaries.id ORDER BY cg.id, pair_summaries.id</sql><current_tab id="2"/></tab_sql></sqlb_project>
