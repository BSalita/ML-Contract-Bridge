<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="E:/bridge/data/acbl/acbl-details.sqlite" readonly="1" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="1"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="125"/><column_width id="3" width="25748"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,7:mainplayers"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="awards" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="79"/><column index="2" value="236"/><column index="3" value="109"/><column index="4" value="90"/><column index="5" value="146"/><column index="6" value="300"/><column index="7" value="60"/><column index="8" value="52"/><column index="9" value="52"/><column index="10" value="97"/><column index="11" value="52"/><column index="12" value="170"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="board_results" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths/><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="pair_summaries" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="70"/><column index="2" value="236"/><column index="3" value="109"/><column index="4" value="99"/><column index="5" value="151"/><column index="6" value="119"/><column index="7" value="120"/><column index="8" value="86"/><column index="9" value="52"/><column index="10" value="137"/><column index="11" value="56"/><column index="12" value="106"/><column index="13" value="108"/><column index="14" value="88"/><column index="15" value="99"/><column index="16" value="97"/><column index="17" value="152"/><column index="18" value="140"/><column index="19" value="170"/></column_widths><filter_values><column index="1" value="6627500"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="players" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths/><filter_values><column index="5" value="2454602"/><column index="7" value="flom"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="Set WAL Mode">PRAGMA journal_mode=WAL;
</sql><sql name="cgByBoard">-- Takes 3 minutes to read 24GB file and write 1.7GB table.
DROP TABLE IF EXISTS cgByBoard;
CREATE TABLE cgByBoard AS SELECT board_results.id, board_id, section_id, name AS section_name, round_number, table_number, ns_pair, ew_pair, ns_score, ew_score, contract, declarer, ew_match_points, ns_match_points, opening_lead, result, tricks_taken FROM board_results INNER JOIN boards ON board_results.board_id=boards.id INNER JOIN sections ON boards.section_id=sections.id ORDER BY section_id, round_number, table_number;
SELECT * FROM cgByBoard;
</sql><sql name="cgByBoardsJoinPairs">DROP TABLE IF EXISTS cgBoardsJoinPairs;
CREATE TABLE cgBoardsJoinPairs AS SELECT cgByBoard.*, pair_number, direction, pair_summaries.id AS pair_summary_id FROM cgByBoard INNER JOIN pair_summaries ON cgByBoard.section_id=pair_summaries.section_id GROUP BY round_number, table_number, board_id, pair_summaries.id ORDER BY cgByBoard.id, round_number, table_number, board_id, pair_summaries.id;
SELECT * FROM cgBoardsJoinPairs;
</sql><sql name="SQL 4">SELECT DISTINCT cg.id, cg.section_id, cg.name, board_id, round_number, table_number, ns_pair, ew_pair, pair_summaries.id, pair_number, direction, players.id, group_concat(players.id_number,','), group_concat(players.name,',') FROM cg INNER JOIN pair_summaries ON cg.section_id=pair_summaries.section_id INNER JOIN players ON players.pair_summary_id=pair_summaries.id GROUP BY pair_summaries.id ORDER BY cg.id, pair_summaries.id</sql><current_tab id="2"/></tab_sql></sqlb_project>
